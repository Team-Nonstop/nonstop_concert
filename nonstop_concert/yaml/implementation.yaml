# Concert client tuples are of the platform-system-robot-name-app where
# the name is just a placemarker for the eventual concert client name.
# All other parts of the tuple are fixed.

name: "Nonstop Concert"
nodes:
  - id: sniperbot 
    tuple: linux.ros.sniperbot.nonstop_rapps/sniperbot
    min: 1
    max: 3
  - id: watcher
    tuple: linux.ros.coldeyes.nonstop_rapps/coldeyes
    min: 1
    max: 1
  - id: multinav_database
    tuple: linux.ros.pc.nonstop_rapps/map_sharing
    min: 1
    max: 1
    force_name_matching: true


topics:
# Shared Database
  - id: shared_database_map
    type: nav_msgs/OccupancyGrid
  - id: shared_database_map_metadata
    type: nav_msgs/MapMetaData

# Coldeyes

# sniperbot
  - id: sniperbot_pose
    type: geometry_msgs/PoseStamped
  - id: sniperbot_map
    type: nav_msgs/OccupancyGrid
  - id: sniperbot_map_metadata
    type: nav_msgs/MapMetaData
  - id: sniperbot_simple_goal
    type: geometry_msgs/PoseStamped
  - id: sniperbot_initialpose
    type: geometry_msgs/PoseStamped

actions:
  - id: sniperbot_movebase
    type: move_base_msgs/MoveBase

edges:
## multinav database
  - start: multinav_database
    finish: multinav_database_map 
    remap_from: map
    remap_to: /map
  - start: multinav_database
    finish: multinav_database_map_metadata
    remap_from: map_metadata
    remap_to: /map_metadata

  - start: sniperbot
    finish: sniperbot_map
    remap_from: map
    remap_to: /map
  - start: sniperbot
    finish: sniperbot_map_metadata
    remap_from: map_metadata
    remap_to: /map_metadata
  - start: sniperbot
    finish: sniperbot_simple_goal
    remap_from: move_base_simple/goal
    remap_to: goal_simple
  - start: sniperbot
    finish: sniperbot_initialpose
    remap_from: initialpose
    remap_to: /sniperbot/initialpose
#  - start: raison
#    finish: raison_image
#    remap_from: camera/rgb/image_raw
#    remap_to: /raison/camera/rgb/image_raw
